json = '[ {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-02T00:00:00.000-0500",
    "count" : "13380"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-03T00:00:00.000-0500",
    "count" : "2093"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-04T00:00:00.000-0500",
    "count" : "3060"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-05T00:00:00.000-0500",
    "count" : "3060"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-06T00:00:00.000-0500",
    "count" : "414"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-07T00:00:00.000-0500",
    "count" : "7311"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-08T00:00:00.000-0500",
    "count" : "5593"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-09T00:00:00.000-0500",
    "count" : "13443"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-10T00:00:00.000-0500",
    "count" : "13300"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-11T00:00:00.000-0500",
    "count" : "7971"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-12T00:00:00.000-0500",
    "count" : "18916"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-13T00:00:00.000-0500",
    "count" : "99"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-14T00:00:00.000-0500",
    "count" : "21405"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-15T00:00:00.000-0500",
    "count" : "219"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-16T00:00:00.000-0500",
    "count" : "3"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-17T00:00:00.000-0500",
    "count" : "147"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-18T00:00:00.000-0500",
    "count" : "1047"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-19T00:00:00.000-0500",
    "count" : "135"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-20T00:00:00.000-0500",
    "count" : "5830"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-21T00:00:00.000-0500",
    "count" : "5868"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-22T00:00:00.000-0500",
    "count" : "792"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-23T00:00:00.000-0500",
    "count" : "36"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-24T00:00:00.000-0500",
    "count" : "29"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-25T00:00:00.000-0500",
    "count" : "283"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-26T00:00:00.000-0500",
    "count" : "569"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-27T00:00:00.000-0500",
    "count" : "753"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-02-28T00:00:00.000-0500",
    "count" : "598"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-01T00:00:00.000-0500",
    "count" : "83"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-02T00:00:00.000-0500",
    "count" : "987"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-03T00:00:00.000-0500",
    "count" : "898"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-04T00:00:00.000-0500",
    "count" : "8137"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-05T00:00:00.000-0500",
    "count" : "187"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-06T00:00:00.000-0500",
    "count" : "4981"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-07T00:00:00.000-0500",
    "count" : "430"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-08T00:00:00.000-0500",
    "count" : "56"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-09T00:00:00.000-0500",
    "count" : "17276"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-10T00:00:00.000-0500",
    "count" : "50"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-11T00:00:00.000-0400",
    "count" : "1665"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-12T00:00:00.000-0400",
    "count" : "1110"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-13T00:00:00.000-0400",
    "count" : "663"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-14T00:00:00.000-0400",
    "count" : "7541"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-15T00:00:00.000-0400",
    "count" : "3655"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-16T00:00:00.000-0400",
    "count" : "467"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-17T00:00:00.000-0400",
    "count" : "16671"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-18T00:00:00.000-0400",
    "count" : "4499"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-19T00:00:00.000-0400",
    "count" : "2767"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-20T00:00:00.000-0400",
    "count" : "18871"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-21T00:00:00.000-0400",
    "count" : "11861"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-22T00:00:00.000-0400",
    "count" : "426"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-23T00:00:00.000-0400",
    "count" : "94"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-24T00:00:00.000-0400",
    "count" : "348"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-25T00:00:00.000-0400",
    "count" : "348"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-26T00:00:00.000-0400",
    "count" : "269"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-27T00:00:00.000-0400",
    "count" : "12694"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-28T00:00:00.000-0400",
    "count" : "25042"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-29T00:00:00.000-0400",
    "count" : "252"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-30T00:00:00.000-0400",
    "count" : "1059"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-03-31T00:00:00.000-0400",
    "count" : "0"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-01T00:00:00.000-0400",
    "count" : "5745"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-02T00:00:00.000-0400",
    "count" : "372"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-03T00:00:00.000-0400",
    "count" : "2634"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-04T00:00:00.000-0400",
    "count" : "449"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-05T00:00:00.000-0400",
    "count" : "1394"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-06T00:00:00.000-0400",
    "count" : "5"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-07T00:00:00.000-0400",
    "count" : "13"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-08T00:00:00.000-0400",
    "count" : "16"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-09T00:00:00.000-0400",
    "count" : "787"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-10T00:00:00.000-0400",
    "count" : "859"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-11T00:00:00.000-0400",
    "count" : "65"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-12T00:00:00.000-0400",
    "count" : "720"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-13T00:00:00.000-0400",
    "count" : "854"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-14T00:00:00.000-0400",
    "count" : "161"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-15T00:00:00.000-0400",
    "count" : "3"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-16T00:00:00.000-0400",
    "count" : "18"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-17T00:00:00.000-0400",
    "count" : "132"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-18T00:00:00.000-0400",
    "count" : "1339"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-19T00:00:00.000-0400",
    "count" : "156"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-20T00:00:00.000-0400",
    "count" : "0"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-21T00:00:00.000-0400",
    "count" : "1192"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-22T00:00:00.000-0400",
    "count" : "108"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-23T00:00:00.000-0400",
    "count" : "1308"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-24T00:00:00.000-0400",
    "count" : "64"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-25T00:00:00.000-0400",
    "count" : "0"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-26T00:00:00.000-0400",
    "count" : "12233"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-27T00:00:00.000-0400",
    "count" : "2"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-28T00:00:00.000-0400",
    "count" : "0"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-29T00:00:00.000-0400",
    "count" : "473"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-04-30T00:00:00.000-0400",
    "count" : "1737"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-01T00:00:00.000-0400",
    "count" : "470"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-02T00:00:00.000-0400",
    "count" : "1198"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-03T00:00:00.000-0400",
    "count" : "312"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-04T00:00:00.000-0400",
    "count" : "1228"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-05T00:00:00.000-0400",
    "count" : "7037"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-06T00:00:00.000-0400",
    "count" : "925"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-07T00:00:00.000-0400",
    "count" : "26"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-08T00:00:00.000-0400",
    "count" : "2"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-09T00:00:00.000-0400",
    "count" : "331"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-10T00:00:00.000-0400",
    "count" : "1660"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-11T00:00:00.000-0400",
    "count" : "0"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-12T00:00:00.000-0400",
    "count" : "4"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-13T00:00:00.000-0400",
    "count" : "125"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-14T00:00:00.000-0400",
    "count" : "8"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-15T00:00:00.000-0400",
    "count" : "172"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-16T00:00:00.000-0400",
    "count" : "303"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-17T00:00:00.000-0400",
    "count" : "4035"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-18T00:00:00.000-0400",
    "count" : "1"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-19T00:00:00.000-0400",
    "count" : "0"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-20T00:00:00.000-0400",
    "count" : "0"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-21T00:00:00.000-0400",
    "count" : "0"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-22T00:00:00.000-0400",
    "count" : "0"
  }
}, {
  "preview" : false,
  "result" : {
    "_time" : "2013-05-23T00:00:00.000-0400",
    "count" : "36925"
  }
}, {
  "preview" : false,
  "lastrow" : true,
  "result" : {
    "_time" : "2013-05-24T00:00:00.000-0400",
    "count" : "36"
  }
} ]'

data = JSON.parse json
i = 0

# :first_in sets how long it takes before the job is first run. In this case, it is run immediately
SCHEDULER.every '5s' do
  amount = data[i]["result"]["count"]
  eventdate = data[i]["result"]["_time"]
  amount = Integer(amount)
  send_event('activity', { current: amount, date: eventdate })
  if i < (data.length - 1)
     i += 1
        else
           i = 0
  end
end
